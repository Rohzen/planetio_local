<odoo>
  <!-- Azione corretta per aprire il wizard -->
  <record id="action_planetio_oauth_test_wizard" model="ir.actions.act_window">
    <field name="name">OAuth – Test GFW</field>
    <field name="res_model">planetio.oauth.test.wizard</field>
    <field name="view_mode">form</field>
    <field name="target">new</field>
  </record>

  <!-- Menu o pulsante che apre l'azione (adatta l'id del menu se serve) -->
  <menuitem id="menu_planetio_oauth_test_wizard"
            name="Test OAuth GFW"
            parent="menu_eudr_ai_root"
            action="action_planetio_oauth_test_wizard"/>

  <!-- View del wizard: token non obbligatorio e readonly -->
  <record id="view_planetio_oauth_test_wizard_form" model="ir.ui.view">
    <field name="name">planetio.oauth.test.wizard.form</field>
    <field name="model">planetio.oauth.test.wizard</field>
    <field name="arch" type="xml">
      <form string="OAuth – Test GFW">
        <group>
          <group>
            <field name="provider"/>
            <field name="token_url" required="1" placeholder="https://api.globalforestwatch.org/auth/token"/>
            <field name="client_id" required="1"/>
            <field name="client_secret" required="1" password="1"/>
            <field name="scope"/>
            <field name="test_url" placeholder="(opzionale, endpoint protetto per fare GET con Bearer)"/>
            <field name="save_to_params"/>
          </group>
          <group string="Esito">
            <field name="token_preview" readonly="1"/>
            <field name="result_message" readonly="1"/>
          </group>
        </group>
        <footer>
          <button name="action_test" string="Test connessione" type="object" class="btn-primary"/>
          <button string="Chiudi" special="cancel" class="btn-secondary"/>
        </footer>
      </form>
    </field>
  </record>
</odoo>

