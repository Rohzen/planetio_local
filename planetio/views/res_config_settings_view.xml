<odoo>
<record id="planetio_res_config_settings_view" model="ir.ui.view">
  <field name="name">planetio.res.config.settings.view.form</field>
  <field name="model">res.config.settings</field>
  <field name="inherit_id" ref="base.res_config_settings_view_form"/>
  <field name="arch" type="xml">

    <!-- inject into the global container; your app block defines data-key -->
    <xpath expr="//div[hasclass('settings')]" position="inside">

      <div class="app_settings_block" data-string="Planetio" data-key="planetio">
        <div class="row mt16 o_settings_container" name="planetio_debug">
          <div class="col-12 col-lg-12 o_setting_box">
            <div class="o_setting_left_pane"/>
            <div class="o_setting_right_pane">
              <span class="o_form_label">Debug Excel Import</span>
              <div class="text-muted"><field name="debug_import"/></div>
            </div>
          </div>
          <div class="col-12 col-lg-12 o_setting_box">
            <div class="o_setting_left_pane"/> 
            <div class="o_setting_right_pane">
              <span class="o_form_label">
                Classification used by PLANETIO/TRACES for DDS submission:
                <ul>
                  <li>Operator: places products on the EU market for the first time or exports them</li>
                  <li>Trader: buys/sells products already placed on the EU market (SME / non-SME)</li>
                  <li>Mixed: may act either as operator or trader depending on the case</li>
                  <li>Third Party Trader: submits on behalf of another party, with mandate and EU establishment</li>
                </ul>
              </span>
              <div class="text-muted"><field name="eudr_company_type"/></div>
            </div>
          </div>
          <div class="col-12 col-lg-12 o_setting_box" attrs="{'invisible': [('eudr_company_type','not in',('trader','mixed'))]}">
            <div class="o_setting_left_pane"/> 
            <div class="o_setting_right_pane">
              <span class="o_form_label">Relevant only if the company operates as Trader / Mixed (in Trader mode).</span>
              <div class="text-muted"><field name="eudr_is_sme"/></div>
            </div>
          </div>
          <div class="col-12 col-lg-12 o_setting_box" attrs="{'invisible': [('eudr_company_type','!=','third_party_trader')]}">
            <div class="o_setting_left_pane"/> 
            <div class="o_setting_right_pane">
              <span class="o_form_label">Third Party: Signed mandate</span>
              <div class="text-muted"><field name="eudr_third_party_has_mandate"/></div>
            </div>
          </div>
          <div class="col-12 col-lg-12 o_setting_box" attrs="{'invisible': [('eudr_company_type','!=','third_party_trader')]}">
            <div class="o_setting_left_pane"/> 
            <div class="o_setting_right_pane">
              <span class="o_form_label">Third Party: Established in the EU</span>
              <div class="text-muted"><field name="eudr_third_party_established_in_eu"/></div>
            </div>
          </div>
        </div>

<!--        <h2>Global Forest Watch API</h2>-->
<!--        <div class="row mt16 o_settings_container" name="planetio_settings">-->
<!--          <div class="col-12 col-lg-12 o_setting_box">-->
<!--            <div class="o_setting_left_pane"/>-->
<!--            <div class="o_setting_right_pane">-->
<!--              <span class="o_form_label">GreenForestWatch User</span>-->
<!--              <div class="text-muted"><field name="gfw_email"/></div>-->

<!--              <span class="o_form_label">GreenForestWatch Password</span>-->
<!--              <div class="text-muted"><field name="gfw_password" password="True"/></div>-->

<!--              <span class="o_form_label">Organization</span>-->
<!--              <div class="text-muted"><field name="gfw_org"/></div>-->

<!--              <span class="o_form_label">Alias</span>-->
<!--              <div class="text-muted"><field name="gfw_alias"/></div>-->

<!--              <span class="o_form_label">API Key</span>-->
<!--              <div class="text-muted"><field name="gfw_api_key" readonly="1"/></div>-->

<!--              <span class="o_form_label">Alert lookback window</span>-->
<!--              <div class="text-muted"><field name="gfw_alert_years"/></div>-->
<!--            </div>-->

<!--            <div class="o_setting_right_pane">-->
<!--              <button type="object"-->
<!--                      name="action_generate_gfw_api_key"-->
<!--                      string="Genera/Aggiorna API key"-->
<!--                      class="btn btn-primary"/>-->
<!--              <p class="text-muted">-->
<!--                Se l'API key non è valida o mancante, verrà creata/recuperata usando email e password.-->
<!--              </p>-->
<!--            </div>-->
<!--          </div>-->
<!--        </div>-->

        <h2>Deforestation Analysis</h2>
        <div class="row mt16 o_settings_container" name="deforestation_provider_settings">
          <div class="col-12 col-lg-12 o_setting_box">
            <div class="o_setting_left_pane"/>
            <div class="o_setting_right_pane">
              <span class="o_form_label">Deforestation Provider</span>
              <div class="text-muted"><field name="deforestation_provider"/></div>
              <p class="text-muted">
                Choose whether EUDR deforestation checks should use Global Forest Watch or the
                Plant-for-the-Planet Farm Data Analysis service.
              </p>
            </div>
          </div>
        </div>

        <div class="row mt16 o_settings_container" name="planetio_settings" attrs="{'invisible': [('deforestation_provider', '!=', 'gfw')]}">
          <h3>Global Forest Watch API</h3>
          <div class="col-12 col-lg-12 o_setting_box">
            <div class="o_setting_left_pane"/>
            <div class="o_setting_right_pane">
              <span class="o_form_label">GreenForestWatch User</span>
              <div class="text-muted"><field name="gfw_email"/></div>

              <span class="o_form_label">GreenForestWatch Password</span>
              <div class="text-muted"><field name="gfw_password" password="True"/></div>

              <span class="o_form_label">Organization</span>
              <div class="text-muted"><field name="gfw_org"/></div>

              <span class="o_form_label">Alias</span>
              <div class="text-muted"><field name="gfw_alias"/></div>

              <span class="o_form_label">API Key</span>
              <div class="text-muted"><field name="gfw_api_key" readonly="1"/></div>

              <span class="o_form_label">Alert lookback window</span>
              <div class="text-muted"><field name="gfw_alert_years"/></div>

              <span class="o_form_label">GFW - Politica area minima</span>
              <div class="text-muted"><field name="gfw_area_policy"/></div>

              <span class="o_form_label">Area minima</span>
              <div class="text-muted"><field name="gfw_min_area_ha"/></div>
            </div>

            <div class="o_setting_right_pane">
              <button type="object"
                      name="action_generate_gfw_api_key"
                      string="Genera/Aggiorna API key"
                      class="btn btn-primary"/>
              <p class="text-muted">
                Se l'API key non è valida o mancante, verrà creata/recuperata usando email e password.
              </p>
            </div>
          </div>
        </div>

        <div class="row mt16 o_settings_container" name="plant4_settings"
             attrs="{'invisible': [('deforestation_provider', '!=', 'plant4')]}">
          <h3>Plant 4 Planet</h3>
          <div class="col-12 col-lg-12 o_setting_box">
            <div class="o_setting_left_pane"/>
            <div class="o_setting_right_pane">
              <span class="o_form_label">Plant-for-the-Planet API Key</span>
              <div class="text-muted"><field name="plant4_api_key" password="True"/></div>
              <p class="text-muted">
                Obtain the API key from the Farm Data Analysis dashboard and paste it here.
              </p>
            </div>
          </div>
          <div class="col-12 col-lg-12 o_setting_box">
            <div class="o_setting_left_pane"/>
            <div class="o_setting_right_pane">
              <span class="o_form_label">Plant-for-the-Planet Base URL</span>
              <div class="text-muted"><field name="plant4_base_url"/>
              </div>
              <p class="text-muted">
                Override the Farm Data Analysis API endpoint when using non-production environments.
              </p>
            </div>
          </div>
        </div>

        <h2>TRACES EUDR API</h2>
        <div class="row mt16 o_settings_container" name="eudr_tracer_settings_container">
          <div class="col-12 col-lg-12 o_setting_box">
            <div class="o_setting_left_pane"/>
            <div class="o_setting_right_pane">
              <span class="o_form_label">User TRACES EUDR</span>
              <div class="text-muted"><field name="eudr_user"/></div>
            </div>
          </div>

          <div class="col-12 col-lg-12 o_setting_box">
            <div class="o_setting_left_pane"/>
            <div class="o_setting_right_pane">
              <span class="o_form_label">Authentication Key TRACES EUDR</span>
              <div class="text-muted"><field name="eudr_apikey" password="True"/></div>
            </div>
          </div>

          <div class="col-12 col-lg-12 o_setting_box">
            <div class="o_setting_left_pane"/>
            <div class="o_setting_right_pane">
              <span class="o_form_label">Webservice access identifier TRACES EUDR</span>
              <div class="text-muted"><field name="eudr_webservice_client_id"/></div>
            </div>
          </div>

          <div class="col-12 col-lg-12 o_setting_box">
            <div class="o_setting_left_pane"/>
            <div class="o_setting_right_pane">
              <span class="o_form_label">Endpoint URL TRACES EUDR</span>
              <div class="text-muted"><field name="eudr_endpoint"/></div>
            </div>
          </div>

          <div class="col-12 col-lg-12 o_setting_box">
            <div class="o_setting_left_pane"/>
            <div class="o_setting_right_pane">
              <span class="o_form_label">DDS submission WSDL Method TRACES EUDR</span>
              <div class="text-muted"><field name="eudr_wsse_mode"/></div>
            </div>
          </div>
        </div>
      </div>

    </xpath>
  </field>
</record>

<record id="action_planetio_config_settings" model="ir.actions.act_window">
        <field name="name">Planetio Settings</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">res.config.settings</field>
        <field name="view_id" ref="planetio_res_config_settings_view"/>
        <field name="view_mode">form</field>
        <field name="target">inline</field>
        <field name="context">{'module' : 'planetio'}</field>
</record>
</odoo>


